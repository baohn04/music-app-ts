extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
  if(role.permissions.includes("topics_edit"))
    +alert-success(3000)
    +alert-error(3000)

    .content-wrapper
      .row
        .col-12.grid-margin
          .card
            .card-body
              h4.card-title Chỉnh sửa chủ đề
              
              form.form-sample(
                action=`${prefixAdmin}/topics/edit/${topic.id}?_method=PATCH`
                method="POST"
                enctype="multipart/form-data"
              )
                p.card-description
                  | Nhập thông tin

                .row
                  .col-md-6
                    .form-group.row
                      label.col-sm-2.col-form-label(for="title") Tiêu đề
                      .col-sm-10
                        input.form-control(
                          type="text"
                          id="title"
                          name="title"
                          required
                          value=topic.title
                        )
                  .col-md-6
                    .form-group.row(upload-image)
                      label.col-sm-2.col-form-label(for="avatar") Ảnh
                      .col-sm-10
                        input.form-control-file(
                          type="file"
                          id="avatar"
                          name="avatar"
                          accept="image/*"
                          upload-image-input
                        )

                        img.image-preview(
                          src=topic.avatar
                          upload-image-preview
                          style="max-width: 200px; margin-top: 10px;"
                        )
                
                .row
                  .col-md-12
                    .form-group.row
                      label.col-sm-2.col-form-label(for="desc") Mô tả
                      .col-sm-10
                        textarea.form-control.textarea-mce(
                          id="desc"
                          name="description"
                          rows="5"
                        ) #{topic.description}
                
                .row
                  .col-md-6
                    .form-group.row
                      label.col-sm-3.col-form-label Trạng thái
                      .col-sm-4
                        .form-check
                          label.form-check-label(for="statusActive")
                            input#statusActive.form-check-input(
                              type='radio'
                              name='status'
                              value='active'
                              checked=(topic.status == "active" ? true : false)
                            )
                            | Hoạt động
                      .col-sm-5
                        .form-check
                          label.form-check-label(for="statusInActive")
                            input#statusInActive.form-check-input(
                              type='radio'
                              name='status'
                              value='inactive'
                              checked=(topic.status == "inactive" ? true : false)
                            )
                            | Dừng hoạt động
                
                .row
                  .col-md-12
                    button(
                      type="submit"
                      class="btn btn-primary me-2"
                    ) Cập nhật

    script(src="/public/admin/css/style.css")
  else 
    h1 Bạn không có quyền truy cập vào trang này